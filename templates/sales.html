{% extends 'base.html' %}

{% block title %}Sprzedaże{% endblock %}

{% block content %}
<div id="salesFormAdd" class="classblock">
    <h3> Dodaj Sprzedaż</h3>
    <form id="addSalesForm" class="classform">
        <label for="client">Klient:</label>
        <select id="clientSelect" class="selectclass">
            <option value="">Wybierz klienta</option>
            {% for client in clients %}
            <option value="{{ client.USER_ID }}">{{ client.NAME }} {{ client.SURNAME }}</option>
            {% endfor %}
        </select>
        <label for="property">Nieruchomość:</label>
        <select id="propertySelect" class="selectclass">
            <option value="">Wybierz nieruchomość</option>
            {% for property in properties %}
            <option value="{{ property.PROPERTY_ID }}">{{ property.CITY }} {{ property.ADDRESS }} {{ property.POSTAL_CODE }}</option>
            {% endfor %}
        </select>
        <label for="agent">Agent:</label>
        <select id="agentSelect" class="selectclass">
            <option value="">Wybierz agenta</option>
            {% for agent in agents %}
            <option value="{{ agent.USER_ID }}">{{ agent.NAME }} {{ agent.SURNAME }}</option>
            {% endfor %}
        </select>
        <label for="date">Data:</label>
        <input type="date" id="add_date" name="date"><br>
        <label for="price">Cena:</label>
        <input type="number" id="add_price" name="price" step="1000"><br>
        <label for="status">Status:</label>
        <select id="statusSelect" class="selectclass">
            <option value="Pending">Pending</option>
            <option value="Completed">Completed</option>
            <option value="Cancelled">Cancelled</option>
        </select>
        <button id="addSales" type="submit">Dodaj sprzedaż</button>
    </form>
</div>
<div id="salesList" class="classblock">
    <h3> Edytuj wybraną sprzedaż</h3>
    <select id="salesSelect" class="selectclass">
        <option value="">Wybierz sprzedaż</option>
        {% for sale in sales %}
        <option value="{{ sale.SALE_ID }}">{{sale.CITY}} {{sale.ADDRESS}} {{sale.AGENT_SURNAME}} --> {{sale.CLIENT_SURNAME}} {{ sale.SALE_DATE }}</option>
        {% endfor %}
    </select>

<div id="salesFormEdit" class="classblock" style="display: none;">
    <h3> Edytuj Sprzedaż</h3>
    <form id="editSalesForm" class="classform">
        <label for="client">Klient:</label>
        <select id="clientSelectEdit" class="selectclass">
            <option value="">Wybierz klienta</option>
            {% for client in clients %}
            <option value="{{ client.USER_ID }}">{{ client.NAME }} {{ client.SURNAME }}</option>
            {% endfor %}
        </select>
        <label for="property">Nieruchomość:</label>
        <select id="propertySelectEdit" class="selectclass">
            <option value="">Wybierz nieruchomość</option>
            {% for property in properties %}
            <option value="{{ property.PROPERTY_ID }}">{{ property.CITY }} {{ property.ADDRESS }} {{ property.POSTAL_CODE }}</option>
            {% endfor %}
        </select>
        <label for="agent">Agent:</label>
        <select id="agentSelectEdit" class="selectclass">
            <option value="">Wybierz agenta</option>
            {% for agent in agents %}
            <option value="{{ agent.USER_ID }}">{{ agent.NAME }} {{ agent.SURNAME }}</option>
            {% endfor %}
        </select>
        <label for="date">Data:</label>
        <input type="date" id="edit_date" name="date"><br>
        <label for="price">Cena:</label>
        <input type="number" id="edit_price" name="price" step="1000"><br>
        <label for="status">Status:</label>
        <select id="statusSelectEdit" class="selectclass">
            <option value="Pending">Pending</option>
            <option value="Completed">Completed</option>
            <option value="Cancelled">Cancelled</option>
        </select>
        <button id="editSales" type="submit">Edytuj sprzedaż</button>
    </form>
    <button id="deleteSales" class="deletebutton">Usuń Sprzedaż</button>
</div>
<script src="/static/sales.js"></script>
{% endblock %}