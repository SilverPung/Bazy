{% extends 'base.html' %}

{% block title %}Naprawy{% endblock %}

{% block content %}


<h1 class="titlename">Naprawy</h1>

<div id="repairFormAdd" class="classblock">
    <h2>Dodaj naprawę do nieruchomości</h2>
    <form id="repairForm" class="classform">
        <label for="repairDate">Data naprawy:</label>
        <input type="date" id="repairDate" name="repairDate">
        <label for="repairStatus">Status naprawy:</label>
        <select id="repairStatus" name="repairStatus" class="selectclass">
            <option value="Pending">Pending</option>
            <option value="In Progress">In Progress</option>
            <option value="Completed">Completed</option>
            <option value="Rescheduled">Rescheduled</option>
        </select>
        <label for="repairDescription">Opis naprawy:</label>
        <input type="text" id="repairDescription" name="repairDescription">
        <label for="repairProperty">Nieruchomość:</label>
        <select id="repairProperty" name="repairProperty" class="selectclass">
            <option value="">Wybierz nieruchomość</option>
            {% for property in properties %}
            <option value="{{ property.PROPERTY_ID }}">{{ property.CITY }} {{ property.ADDRESS }}</option>
            {% endfor %}
        </select><br><br>
        <button type="submit" id="addRepair">Dodaj naprawę</button>
    </form>

</div>

<div id="repairList" class="classblock">
    <h2>Edytuj wybraną naprawę</h2>
    <p>Lista dostępnych napraw:</p>
    <select id="repairSelect" class="selectclass">
        <option value="">Wybierz naprawę</option>
        {% for repair in repairs %}
        <option value="{{ repair.REPAIR_ID }}">{{ repair.REPAIR_DATE }} {{ repair.DESCRIPTION  }} Nieruchomość:{{ repair.CITY }} {{ repair.ADDRESS }} </option>
        {% endfor %}
    </select>
</div>
<div id="repairFormEdit" class="classblock" style="display: none;">
    <form id="repairFormEdit" class="classform">
        <label for="repairDate">Data naprawy:</label>
        <input type="date" id="repairDateEdit" name="repairDate">
        <label for="repairStatus">Status naprawy:</label>
        <select id="repairStatusEdit" name="repairStatus" class="selectclass">
            <option value="Pending">Pending</option>
            <option value="In Progress">In Progress</option>
            <option value="Completed">Completed</option>
            <option value="Rescheduled">Rescheduled</option>
        </select>
        <label for="repairDescription">Opis naprawy:</label>
        <input type="text" id="repairDescriptionEdit" name="repairDescription">
        <label for="repairProperty">Nieruchomość:</label>
        <select id="repairPropertyEdit" name="repairProperty" class="selectclass">
            <option value="">Wybierz nieruchomość</option>
            {% for property in properties %}
            <option value="{{ property.PROPERTY_ID }}">{{ property.CITY }} {{ property.ADDRESS }}</option>
            {% endfor %}
        </select><br><br>
        <button type="submit" id="updateRepair">Edytuj naprawę</button>
    </form>
    <button id="deleteRepair" class="deletebutton">Usuń naprawę</button>
</div>
<script src="/static/repairs.js"></script>

{% endblock %}